<div class="row">
  <div class="col-12">
    <div class="page-title d-flex">
      <h2 class="d-inline-block">รายงานการทำงานรายบุคคล</h2>
    </div>
  </div>
  <div class="col-12 content-left">
    <div class="row">
      <div class="col">
        <form [formGroup]="personReportFormGroup" >
          <div class="row">
            <div class="col">
              <label>พนักงาน *</label>
                <input class="form-control"
                       type="text"
                       id="officer"
                       [disabled]="user.userLevel !== 'A'"
                       [(ngModel)]="officer"
                       formControlName="officer"
                       name="officer">
            </div>
            <div class="col">
              <label>วันที่ *</label>
              <div class="input-group">
                <input class="form-control datepicker"
                       type="text"
                       id="start-date"
                       name="startDate"
                       maxlength="10"
                       data-provide="datepicker"
                       data-date-language="th-th"
                       autocomplete="off"
                       [attr.data-date-start-date]="minDate"
                       [attr.data-date-end-date]="endDate"
                       [(ngModel)]="startDate"
                       formControlName="startDate"
                       summitDatePicker>
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fas fa-calendar-alt"></i>
                  </span>
                </div>
              </div>
            </div>
            <div class="col">
              <label>ถึงวันที่ *</label>
              <div class="input-group">
                <input class="form-control datepicker"
                       type="text"
                       id="end-date"
                       name="endDate"
                       maxlength="10"
                       data-provide="datepicker"
                       data-date-language="th-th"
                       autocomplete="off"
                       [attr.data-date-start-date]="startDate"
                       [(ngModel)]="endDate"
                       [min]="startDate"
                       formControlName="endDate"
                       summitDatePicker>
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fas fa-calendar-alt"></i>
                  </span>
                </div>
              </div>
            </div>
            <div class="col float-right">
              <label>แสดงตาม</label>
                <select class="form-control"
                        id="sort-by"
                        [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="sortBy"
                        name="sort-by" >
                  <option value="1">วันที่</option>
                  <option value="2">โครงการ</option>
                  <option value="3">ป้ายกำกับ</option>
                </select>
            </div>
          </div>
        </form>
        <div class="row">
          <div class="col-12">
            <button class="btn btn-primary text-white" (click)="onSearch()">แสดงข้อมูล</button>
            <button class="btn btn-primary text-white" (click)="onReset()">เริ่มใหม่</button>
            <button class="btn btn-primary text-white float-right" (click)="onSubmitReport()">พิมพ์</button>
          </div>
        </div>

        <!-- orderByDate -->
        <!-- <div class="row" id="orderByDate" *ngIf="tableOrderByDate" > -->
        <div class="row" id="orderByDate">
          <div class="col">
          <div class="table">
            <div class="thead">
              <div class="th"></div>
              <div class="th p-1 date">วันที่ / เวลา</div>
              <div class="th p-1 project">โครงการ</div>
              <div class="th p-1 topic">หัวข้อ</div>
              <div class="th p-1">จำนวน (นาที)</div>
            </div>
            <!-- Body-->
            <div class="tr" *ngFor="let rptPerson of reportPersonList; let i = index" >
              <div class="td text-center p-1">
                <button class="btn btn-link p-0 collapsed"
                        data-toggle="collapse"
                        [attr.data-target]="'.collapse-group' + i">
                  <i class="fas"></i>
                </button>
              </div>
              <div class="td date p-1">
                  {{utilsService.displayFullDate(rptPerson.date)}}
                  <div class="" id="collapse-time" [attr.class]="'collapse collapse-group' + i">
                      <button class="btn btn-link p-0 collapsed"
                              data-toggle="collapse"
                              data-target=".multi-collapse"
                              aria-controls="detail-topic detail-project">
                        <i class="fas"></i>
                      </button>
                      <label> 8.00-9.00 น.</label>
                    </div>
              </div>
              <div class="td p-1">
                  <div>&nbsp;</div>
                  <ol style="padding-left:0px"
                      *ngFor="let project of rptPerson.tasks"
                      [attr.class]="'collapse collapse-group' + i">
                    <li class="hide-index" id="detail-project">{{project.projectAbbr}}</li>
                    <label class="collapse multi-collapse invisible" id="detail-project">hide_project</label>
                  </ol>
              </div>
              <div class="td p-1">
                  <div>&nbsp;</div>
                  <ol *ngFor="let project of rptPerson.tasks"
                      style="padding-left:0px"
                      [attr.class]="'collapse collapse-group' + i">
                <li class="hide-index">{{project.topic}}</li>
                  <label class="collapse multi-collapse" id="detail-topic">{{project.activity}}</label>
                </ol>
              </div>
              <div class="td p-1">
                {{rptPerson.sumWorkTime}} นาที
                <ol *ngFor="let project of rptPerson.tasks"
                      style="padding-left:0px"
                      [attr.class]="'collapse collapse-group' + i">
                <li class="hide-index">{{project.workTime}} นาที</li>
                <label class="collapse multi-collapse invisible" id="detail-project">hide_project</label>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>
</div>

